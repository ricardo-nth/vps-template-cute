---
/**
 * index.astro - Homepage
 *
 * Demonstrates the full implementation of:
 * - Two-tier layout system (TechnicalLayout â†’ SiteLayout)
 * - SEO optimisation with meta tags and schema markup
 * - Image optimisation with Astro's Image component
 * - Tailwind CSS styling
 * - Performance best practices
 */

import SiteLayout from '../layouts/SiteLayout.astro';
import { getEntry } from 'astro:content';

// ============================================================================
// HEALTHCARE IMPORTS (Active)
// ============================================================================
import Hero from '../components/Hero.astro';
import ServicesOverview from '../components/ServicesOverview.astro';
import AboutUs from '../components/AboutUs.astro';
import WhyChooseUs from '../components/WhyChooseUs.astro';
import Testimonials from '../components/Testimonials.astro';
import ContactSection from '../components/ContactSection.astro';
import heroBg from '@assets/images/hero-bg.jpg';
import careFacility from '@assets/images/care-facility.jpg';

// Load content from collections
const homeEntry = await getEntry('cuteHome', 'default');
const homeDomEntry = await getEntry('cuteHome', 'dom-care');
if (!homeEntry) {
  throw new Error('Missing content entry: cuteHome/default');
}
if (!homeDomEntry) {
  throw new Error('Missing content entry: cuteHome/dom-care');
}

const metadata = homeEntry.data.metadata;
const profiles = [
  { key: 'supported-living', content: homeEntry.data },
  { key: 'dom-care', content: homeDomEntry.data },
] as const;
---

<SiteLayout metadata={metadata}>
  <div data-care-profile-switcher>
    {profiles.map(({ key, content }) => (
      <div data-care-profile-panel={key} class:list={{ hidden: key !== 'supported-living' }}>
        <!-- Hero Section -->
        <Hero
          heading={content.hero.heading ?? content.hero.profileContent[key]?.heading}
          subheading={content.hero.subheading ?? content.hero.profileContent[key]?.subheading}
          profileContent={content.hero.profileContent}
          imageSrc={heroBg}
          imageAlt={content.hero.imageAlt}
          ctaText={content.hero.ctaText}
          ctaHref={content.hero.ctaHref}
          socialProofText={content.hero.socialProofText}
          rating={content.hero.rating}
        />

        <!-- Services Section -->
        <ServicesOverview
          eyebrow={content.servicesOverview.eyebrow}
          heading={content.servicesOverview.heading}
          intro={content.servicesOverview.intro}
          services={content.servicesOverview.services}
        />

        <!-- About Us Section -->
        <AboutUs
          eyebrow={content.aboutUs.eyebrow}
          heading={content.aboutUs.heading}
          description={content.aboutUs.description}
          ctaText={content.aboutUs.ctaText}
          ctaHref={content.aboutUs.ctaHref}
          imageSrc={careFacility}
          imageAlt={content.aboutUs.imageAlt}
        />

        <!-- Why Choose Us Section -->
        <WhyChooseUs
          heading={content.whyChooseUs.heading}
          points={content.whyChooseUs.points}
        />

        <!-- Testimonials Section -->
        <Testimonials
          eyebrow={content.testimonials.eyebrow}
          heading={content.testimonials.heading}
          intro={content.testimonials.intro}
          testimonials={content.testimonials.items}
        />

        <!-- Contact Section -->
        <ContactSection
          heading={content.contactSection.heading}
          intro={content.contactSection.intro}
          phoneLabel={content.contactSection.phoneLabel}
          phoneHref={content.contactSection.phoneHref}
          emailLabel={content.contactSection.emailLabel}
          emailHref={content.contactSection.emailHref}
          address={content.contactSection.address}
        />
      </div>
    ))}
  </div>
</SiteLayout>
